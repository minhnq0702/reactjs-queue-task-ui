import{j as t,M as y,N as k}from"./index-BEuk3JtB.js";import{r as a,u as S,e as v,g as M}from"./store-Bwm-NDa9.js";import{C as P,c as L,t as N,d as I,e as T,f as E,g as R,h as A,i as F,j as D,k as G}from"./PagiPageCtrl-Cq9HWaAz.js";import{s as w}from"./chunk-TDOFO53L-B11LXV_x.js";import"./chunk-2PIR7DFM-BRK0am9t.js";const K=[{key:"sender",label:"Sender"},{key:"receiver",label:"Receiver"},{key:"content",label:"Content"},{key:"failReason",label:"Fail Reason"},{key:"id",label:"ID"},{key:"state",label:"Status"},{key:"action",label:"Action"}],V=({isLoading:d,messages:i,limitCtrl:u,pageCtrl:r,onRowClick:s})=>{const c=a.useCallback((e,n)=>{console.log("click",e,n)},[]),l=a.useMemo(()=>i.map(e=>({_id:e._id,id:t.jsx(P,{content:e._id}),receiver:e.receiver,sender:e.sender,content:e.content,failReason:e.failReason,state:t.jsx(L,{status:e.state}),action:t.jsxs("div",{className:"relative flex items-center gap-2",children:[t.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50 hover:text-primary-500",onClick:()=>c(e._id,"view"),children:t.jsx(y,{})}),t.jsx("span",{className:"text-medium text-danger-400 cursor-pointer active:opacity-70",onClick:()=>c(e._id,"detele"),children:t.jsx(k,{})})]})})),[i]);return t.jsx("div",{className:"",children:t.jsxs(N,{"aria-label":"Message Summary",isStriped:!0,topContent:u,topContentPlacement:"outside",bottomContent:r,bottomContentPlacement:"outside",children:[t.jsx(I,{columns:K,children:e=>t.jsx(T,{"aria-label":e.key,className:"text-small",children:e.label},e.key)}),t.jsx(E,{isLoading:d,items:l,emptyContent:"No rows to display.",loadingContent:t.jsx(w,{label:"Loading..."}),children:e=>t.jsx(R,{className:"h-10",onClick:()=>s?s(e._id):null,children:n=>t.jsx(A,{children:F(e,n)})},e._id)})]})})},q=1,z=20,U=()=>{const d=S(),i=v(o=>o.message.messages),[u,r]=a.useState(!1),[s,c]=a.useState(z),[l,e]=a.useState(q),[n,C]=a.useState(0),[m,x]=a.useState(0),h=a.useCallback((o,j)=>{r(!0),d(M.LIST_MSG({limit:o,page:j})).then(_=>{r(!1);const p=_.payload.total??0;C(p),x(Math.ceil(p/o))})},[]);a.useEffect(()=>{h(s,l)},[l,s]);const b=a.useCallback(o=>{e(1),c(o)},[]),g=a.useMemo(()=>t.jsx(D,{total:n,limit:s,onLimitChange:b}),[n]),f=a.useMemo(()=>t.jsx(G,{currentPage:l,totalPage:m,onPageChange:e}),[l,m]);return t.jsx(t.Fragment,{children:t.jsx(V,{isLoading:u,messages:i,limitCtrl:g,pageCtrl:f})})};export{U as default};
